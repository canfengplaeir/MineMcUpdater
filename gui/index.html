<!DOCTYPE html>
<html lang="zh" data-theme="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Language" content="zh-CN">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="css/main.css">
  <link rel="icon" href="https://objectstorageapi.bja.sealos.run/g6rnmc1y-mymy/logo.jpg">
  <title>不为人知的小世界</title>
</head>

<body>
  <!-- 固定侧边栏 -->
  <div class="fixed top-0 left-0 right-0 h-10 z-50 cursor-pointer pywebview-drag-region" id="drag-bar"></div>
  
  <!-- 窗口控制按钮 -->
  <div class="fixed top-0 right-0 z-50 flex items-center h-10 mr-2">
    <button id="minimize-btn" class="w-8 h-8 flex items-center justify-center text-gray-400 hover:text-white transition-colors focus:outline-none frosted-glass">
      <i class="fa-solid fa-window-minimize"></i>
    </button>
    <button id="close-btn" class="w-8 h-8 flex items-center justify-center text-gray-400 hover:text-white transition-colors focus:outline-none frosted-glass ml-1 hover:bg-red-500/20">
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  
  <div class="fixed left-0 top-0 bottom-0 w-52 sidebar text-white flex flex-col shadow-xl z-50 animate-fade-in-right">
    <div class="sidebar-header flex items-center">
      <img src="https://objectstorageapi.bja.sealos.run/g6rnmc1y-mymy/logo.jpg" alt="Logo"
        class="w-9 h-9 mr-3 animate-fade-in rounded-full border border-white/20 shadow-md"
        style="animation-delay: 0.1s">
      <h2 class="text-l font-bold animate-fade-in gradient-text" style="animation-delay: 0.15s">不为人知的小世界</h2>
    </div>

    <div class="px-3 py-4 text-xs font-semibold text-gray-400 animate-fade-in" style="animation-delay: 0.2s">主要功能</div>

    <ul class="menu px-3 flex-grow space-y-2">
      <li class="animate-fade-in sidebar-item active" style="animation-delay: 0.25s" data-page="home">
        <a class="hover-scale flex items-center p-3">
          <div class="sidebar-icon mr-3"><i class="fa-solid fa-home text-white"></i></div>
          <span>主页</span>
        </a>
      </li>
      <li class="animate-fade-in sidebar-item" style="animation-delay: 0.3s" data-page="about">
        <a class="hover-scale flex items-center p-3">
          <div class="sidebar-icon mr-3"><i class="fa-solid fa-info-circle text-white"></i></div>
          <span>关于</span>
        </a>
      </li>
    </ul>

    <div class="sidebar-footer mt-auto animate-fade-in flex flex-col items-center justify-between"
      style="animation-delay: 0.35s">
      <!-- 用户登录占位 -->
      <div class="w-full p-3 frosted-glass rounded-lg mb-4 text-center">
        <p class="text-sm text-gray-300">欢迎，<span id="user-name">游客</span></p>
        <button id="login-btn" class="glass-button py-2 px-4 rounded-lg text-white hover-scale mt-2">
          登录
        </button>
      </div>
      <p class="text-xs text-gray-400">版本 <span id="game-version">1.0.0</span></p>
      <div class="flex space-x-2">
        <button id="announcement-btn"
          class="w-6 h-6 rounded-full frosted-glass flex items-center justify-center text-white text-xs hover-scale"
          title="查看公告">
          <i class="fa-solid fa-bullhorn"></i>
        </button>
        <button
          class="w-6 h-6 rounded-full frosted-glass flex items-center justify-center text-white text-xs hover-scale">
          <i class="fa-solid fa-question"></i>
        </button>
        <button
          class="w-6 h-6 rounded-full frosted-glass flex items-center justify-center text-white text-xs hover-scale">
          <i class="fa-solid fa-info"></i>
        </button>
      </div>
    </div>
  </div>

  <!-- 主内容区域，添加左边距为侧边栏宽度 -->
  <div class="ml-52 flex-grow relative min-h-screen animate-fade-in-up " style="animation-delay: 0.1s" >
    <!-- 背景图片 -->
    <div class="absolute inset-0 bg-cover bg-center transition-all duration-1000 ease-in-out"
      style="background-image: url('https://objectstorageapi.bja.sealos.run/g6rnmc1y-mymy/hero-bg.jpg');">
      <!-- 降低背景亮度并添加渐变 -->
      <div class="absolute inset-0 bg-gradient-to-br from-black/70 to-black/40"></div>
    </div>

    <!-- 内容区域 -->
    <div class="relative z-0 p-8 flex flex-col justify-between min-h-screen">
      <!-- 主页内容 -->
      <div id="home-page" class="page-content flex flex-col justify-between min-h-[calc(100vh-4rem)]">
        <!-- 顶部区域 -->
        <div class="animate-fade-in" style="animation-delay: 0.3s">
          <h1 class="text-5xl font-bold text-white mb-2">欢迎回来</h1>
          <p class="text-gray-300 mt-2 text-lg">准备开始您的冒险？</p>
          <div class="h-1 w-20 bg-white rounded-full mt-4"></div>
        </div>

        <!-- 底部区域 -->
        <div class="flex justify-between items-end">
          <!-- 轮播图 -->
          <div class="carousel-container w-[370px] frosted-glass p-5 animate-fade-in-left rounded-xl"
            style="animation-delay: 0.35s">
            <div class="carousel-slider" id="carousel">
              <div class="carousel-slide active p-2">
                <div class="slide-image">
                  <img src="https://objectstorageapi.bja.sealos.run/g6rnmc1y-mymy/hero-bg.jpg"
                    class="rounded-lg h-40 w-full object-cover shadow-lg" />
                </div>
                <h3 class="text-white font-medium mt-3">探索无限世界</h3>
                <p class="text-gray-300 text-sm mt-1">体验全新地形生成和探险玩法</p>
              </div>
              <div class="carousel-slide p-2">
                <div class="slide-image">
                  <img src="https://objectstorageapi.bja.sealos.run/g6rnmc1y-mymy/hero-bg.jpg"
                    class="rounded-lg h-40 w-full object-cover shadow-lg" />
                </div>
                <h3 class="text-white font-medium mt-3">全新生物群系</h3>
                <p class="text-gray-300 text-sm mt-1">发现神秘生物和隐藏宝藏</p>
              </div>
              <div class="carousel-slide p-2">
                <div class="slide-image">
                  <img src="https://objectstorageapi.bja.sealos.run/g6rnmc1y-mymy/hero-bg.jpg"
                    class="rounded-lg h-40 w-full object-cover shadow-lg" />
                </div>
                <h3 class="text-white font-medium mt-3">多人联机体验</h3>
                <p class="text-gray-300 text-sm mt-1">与好友共建理想王国</p>
              </div>
            </div>
            <div class="carousel-indicators">
              <div class="carousel-indicator active" data-index="0"></div>
              <div class="carousel-indicator" data-index="1"></div>
              <div class="carousel-indicator" data-index="2"></div>
            </div>
            <button
              class="absolute left-2 top-1/2 -translate-y-1/2 w-7 h-7 flex items-center justify-center rounded-full frosted-glass text-white hover-scale"
              id="prev-btn">
              <i class="fa-solid fa-chevron-left"></i>
            </button>
            <button
              class="absolute right-2 top-1/2 -translate-y-1/2 w-7 h-7 flex items-center justify-center rounded-full frosted-glass text-white hover-scale"
              id="next-btn">
              <i class="fa-solid fa-chevron-right"></i>
            </button>
          </div>

          <!-- 右下角按钮 -->
          <button id="launch-btn"
            class="glass-button hover-glow py-3 px-8 rounded-full text-white font-bold shadow-lg animate-fade-in animate-pulse text-lg flex items-center"
            style="animation-delay: 0.4s">
            <div class="loader mr-2 hidden"></div>
            <i class="fa-solid fa-play mr-2"></i>
            <span id="launch-btn-text">启动游戏</span>
          </button>
        </div>

        <!-- 右侧社交媒体栏 - 移动到主页内部 -->
        <div class="fixed right-8 top-1/2 transform -translate-y-1/2 flex flex-col gap-5  ">
          <button onclick="openLink('https://qm.qq.com/q/Xhb8nGYKAM')"
            class="w-10 h-10 rounded-full frosted-glass flex items-center justify-center text-white animate-fade-in-left hover-scale hover-glow"
            style="animation-delay: 0.45s"><i class="fa-brands fa-qq text-xl"></i></button>
          <button onclick="openLink('https://www.bilibili.com/')"
            class="w-10 h-10 rounded-full frosted-glass flex items-center justify-center text-white animate-fade-in-left hover-scale hover-glow"
            style="animation-delay: 0.5s"><i class="fa-brands fa-bilibili text-xl"></i></button>
          <button onclick="openLink('https://especial.top/')"
            class="w-10 h-10 rounded-full frosted-glass flex items-center justify-center text-white animate-fade-in-left hover-scale hover-glow"
            style="animation-delay: 0.55s">
            <svg version="1.1" id="layer_one" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
              x="0px" y="0px" viewBox="0 0 1920 1920" style="enable-background:new 0 0 1920 1920;" xml:space="preserve"
              class="w-9 h-9">
              <style type="text/css">
                .st0 {
                  fill: none;
                  stroke: #FFFFFF;
                  stroke-width: 60;
                  stroke-linecap: round;
                  stroke-linejoin: round;
                  stroke-miterlimit: 10;
                }

                .st1 {
                  fill: #FFFFFF;
                }
              </style>
              <polyline class="st0" points="1154.5,836.5 1427.5,661.5 1385.5,1090.5 " />
              <polyline class="st0" points="768.5,836.5 495.5,661.5 537.5,1090.5 " />
              <path class="st1" d="M814.45,1329.59L814.45,1329.59c34.21,0,61.95-27.74,61.95-61.95v-110.69c0-34.21-27.74-61.95-61.95-61.95h0
                c-34.21,0-61.95,27.74-61.95,61.95v110.69C752.5,1301.85,780.24,1329.59,814.45,1329.59z" />
              <path class="st1" d="M1105.97,1330L1105.97,1330c34.21,0,61.95-27.74,61.95-61.95v-110.69c0-34.21-27.74-61.95-61.95-61.95h0
                c-34.21,0-61.95,27.74-61.95,61.95v110.69C1044.02,1302.26,1071.76,1330,1105.97,1330z" />
              <path class="st1"
                d="M369,1350l539.43-539.43c28.48-28.48,74.66-28.48,103.14,0L1551,1350h148.25c-4.48-6.21-9.5-12.14-15.08-17.73
                l-622.44-622.44c-56.18-56.18-147.28-56.18-203.46,0l-622.44,622.44c-5.59,5.59-10.61,11.52-15.08,17.73H369z" />
            </svg>
          </button>
        </div>
      </div>

      <!-- 关于页面内容 -->
      <div id="about-page" class="page-content hidden">
        <div class="max-w-3xl mx-auto">
          <!-- 关于页面标题 -->
          <div class="animate-fade-in mb-8" style="animation-delay: 0.5s">
            <h1 class="text-4xl font-bold text-white mb-2">关于不为人知的小世界</h1>
            <p class="text-gray-300 mt-2">探索、创造、冒险的开始</p>
            <div class="h-1 w-20 bg-white rounded-full mt-4"></div>
          </div>

          <!-- 关于页面内容 -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
            <!-- 项目介绍 -->
            <div class="frosted-glass p-6 rounded-xl animate-fade-in" style="animation-delay: 0.6s">
              <div class="flex items-center mb-4">
                <div class="w-10 h-10 rounded-full flex items-center justify-center bg-white/10 mr-3">
                  <i class="fa-solid fa-server text-white"></i>
                </div>
                <h2 class="text-xl font-semibold text-white">项目介绍</h2>
              </div>
              <p class="text-gray-300 leading-relaxed">
                "不为人知的小世界"是一个精心打造的Minecraft服务器，致力于提供流畅、稳定、丰富的游戏体验。我们融合了多种玩法，让每一位玩家都能找到属于自己的乐趣。
              </p>
            </div>

            <!-- 特色功能 -->
            <div class="frosted-glass p-6 rounded-xl animate-fade-in" style="animation-delay: 0.7s">
              <div class="flex items-center mb-4">
                <div class="w-10 h-10 rounded-full flex items-center justify-center bg-white/10 mr-3">
                  <i class="fa-solid fa-wand-magic-sparkles text-white"></i>
                </div>
                <h2 class="text-xl font-semibold text-white">特色功能</h2>
              </div>
              <ul class="text-gray-300 space-y-2">
                <li class="flex items-center"><i class="fa-solid fa-check mr-2 text-green-400"></i> 独特的生存玩法体验</li>
                <li class="flex items-center"><i class="fa-solid fa-check mr-2 text-green-400"></i> 丰富的自定义插件</li>
                <li class="flex items-center"><i class="fa-solid fa-check mr-2 text-green-400"></i> 精心设计的游戏平衡</li>
                <li class="flex items-center"><i class="fa-solid fa-check mr-2 text-green-400"></i> 定期活动与更新</li>
              </ul>
            </div>

            <!-- 服务器配置 -->
            <div class="frosted-glass p-6 rounded-xl animate-fade-in" style="animation-delay: 0.8s">
              <div class="flex items-center mb-4">
                <div class="w-10 h-10 rounded-full flex items-center justify-center bg-white/10 mr-3">
                  <i class="fa-solid fa-gears text-white"></i>
                </div>
                <h2 class="text-xl font-semibold text-white">服务器配置</h2>
              </div>
              <ul class="text-gray-300 space-y-2">
                <li class="flex items-center"><i class="fa-solid fa-microchip mr-2 text-blue-400"></i> 高性能专用服务器</li>
                <li class="flex items-center"><i class="fa-solid fa-memory mr-2 text-blue-400"></i> 16GB 专用内存</li>
                <li class="flex items-center"><i class="fa-solid fa-hard-drive mr-2 text-blue-400"></i> SSD高速存储</li>
                <li class="flex items-center"><i class="fa-solid fa-shield-halved mr-2 text-blue-400"></i> DDoS防护系统</li>
          </ul>
            </div>

            <!-- 团队成员 -->
            <div class="frosted-glass p-6 rounded-xl animate-fade-in" style="animation-delay: 0.9s">
              <div class="flex items-center mb-4">
                <div class="w-10 h-10 rounded-full flex items-center justify-center bg-white/10 mr-3">
                  <i class="fa-solid fa-users text-white"></i>
                </div>
                <h2 class="text-xl font-semibold text-white">团队成员</h2>
              </div>
              <div class="space-y-3">
                <div class="flex items-center">
                  <div class="w-8 h-8 rounded-full bg-gray-600 flex items-center justify-center mr-2">
                    <span class="text-xs font-bold">创</span>
                  </div>
                  <span class="text-white">创始人 - TwilightCity</span>
                </div>
                <div class="flex items-center">
                  <div class="w-8 h-8 rounded-full bg-gray-600 flex items-center justify-center mr-2">
                    <span class="text-xs font-bold">管</span>
                  </div>
                  <span class="text-white">管理员 - RedstoneWizard</span>
                </div>
                <div class="flex items-center">
                  <div class="w-8 h-8 rounded-full bg-gray-600 flex items-center justify-center mr-2">
                    <span class="text-xs font-bold">技</span>
                  </div>
                  <span class="text-white">技术支持 - EndermanPro</span>
                </div>
              </div>
            </div>
          </div>

          <!-- 版权信息 -->
          <div class="text-center mt-10 animate-fade-in" style="animation-delay: 1s">
            <p class="text-gray-400 text-sm">© 2023 不为人知的小世界 - 保留所有权利</p>
            <p class="text-gray-500 text-xs mt-2">Minecraft是Mojang Studios的商标，本站与Mojang和Microsoft没有从属关系</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- 状态提示组件 -->
  <div id="status-indicator" class="status-indicator">
    <div class="close-btn">
      <i class="fa-solid fa-times text-white text-xs"></i>
    </div>
    <div class="flex items-center mb-1">
      <i id="status-icon" class="fa-solid fa-circle-notch fa-spin mr-2"></i>
      <span id="status-title" class="font-semibold">检查游戏状态</span>
    </div>
    <p id="status-message" class="text-sm text-gray-300">正在检查游戏版本...</p>
    <div class="progress">
      <div id="status-progress" class="progress-bar" style="width: 0%"></div>
    </div>
  </div>

  <!-- 在body末尾添加模态框组件 -->
  <!-- 模态框容器 -->
  <div id="modal" class="modal-container">
    <div class="modal-backdrop"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="text-lg font-semibold text-white" id="modal-title">模态框标题</h3>
        <div class="modal-close">
          <i class="fa-solid fa-times text-white"></i>
        </div>
      </div>
      <div class="modal-body" id="modal-body">
        <!-- 模态框内容将在这里动态插入 -->
      </div>
      <div class="modal-footer" id="modal-footer">
        <!-- 默认按钮会在这里动态创建 -->
      </div>
    </div>
  </div>

  <!-- 添加token -->
  <script>
    window.token = '{{ token }}';
  </script>

  <!-- 添加api -->
  <script src="js/api.js"></script>
  <script src="js/game_manager.js"></script>

  <!-- 处理ESM模块加载失败的情况 -->
  <script>
    // 如果5秒后app没有初始化，则加载备用JS
    setTimeout(function () {
      if (typeof window.app === 'undefined') {
        console.warn('ESM模块加载失败，使用备用方案');

        // 创建备用页面切换功能
        const setupPageSwitcher = function () {
          const pages = document.querySelectorAll('.page-content');
          const menuItems = document.querySelectorAll('.sidebar-item');

          if (menuItems.length > 0 && pages.length > 0) {
            menuItems.forEach(item => {
              item.addEventListener('click', () => {
                const targetPage = item.getAttribute('data-page');
                if (!targetPage) return;

                // 更新活动状态
                menuItems.forEach(mi => mi.classList.remove('active'));
                item.classList.add('active');

                // 隐藏所有页面，显示目标页面
                pages.forEach(page => {
                  if (page.id === `${targetPage}-page`) {
                    page.classList.remove('hidden');
                  } else {
                    page.classList.add('hidden');
                  }
                });
              });
            });
          }
        };

        // 调用备用功能
        setupPageSwitcher();

        // 创建备用公告初始化
        if (typeof window.announcementManager !== 'undefined') {
          window.announcementManager.init();
        }
      }
    }, 5000);
  </script>

  <!-- 添加主应用脚本（启用ES模块） -->
  <script type="module" src="js/main.js"></script>
</body>

</html>